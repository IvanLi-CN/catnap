<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Catnap UI Wireframes Preview</title>
    <style>
      :root {
        --bg: #0b1220;
        --panel: #0f1b33;
        --text: #e6eefc;
        --muted: #9bb0d0;
        --border: #243b6b;
        --accent: #2a8a55;
      }

      html,
      body {
        height: 100%;
        margin: 0;
        background: var(--bg);
        color: var(--text);
        font: 14px Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial,
          "Apple Color Emoji", "Segoe UI Emoji";
      }

      body.grid {
        background-image: linear-gradient(rgba(36, 59, 107, 0.25) 1px, transparent 1px),
          linear-gradient(90deg, rgba(36, 59, 107, 0.25) 1px, transparent 1px);
        background-size: 8px 8px;
      }

      header {
        position: sticky;
        top: 0;
        z-index: 10;
        backdrop-filter: blur(6px);
        background: rgba(11, 18, 32, 0.88);
        border-bottom: 1px solid rgba(36, 59, 107, 0.6);
      }

      .wrap {
        max-width: 1200px;
        margin: 0 auto;
        padding: 16px 20px;
      }

      .title {
        display: flex;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
      }

      .title h1 {
        font-size: 16px;
        margin: 0;
      }

      .pill {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 10px;
        border-radius: 10px;
        background: var(--panel);
        border: 1px solid var(--border);
        color: var(--text);
        cursor: pointer;
        user-select: none;
      }

      .pill[aria-pressed="true"] {
        border-color: var(--accent);
      }

      .sub {
        margin: 10px 0 0;
        color: var(--muted);
        line-height: 1.4;
      }

      .meta {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        color: var(--muted);
      }

      .meta code {
        color: var(--text);
      }

      main {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .card {
        background: var(--panel);
        border: 1px solid var(--border);
        border-radius: 14px;
        overflow: hidden;
      }

      .cardHead {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
        padding: 14px 16px 10px;
        border-bottom: 1px solid rgba(36, 59, 107, 0.6);
      }

      .cardHead .name {
        font-weight: 800;
      }

      .cardHead .links a {
        color: var(--muted);
        text-decoration: none;
        margin-left: 10px;
      }

      .cardHead .links a:hover {
        color: var(--text);
        text-decoration: underline;
      }

      img {
        width: 100%;
        height: auto;
        display: block;
        background: #000;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="wrap">
        <div class="title">
          <h1>UI 线框预览（PNG）</h1>
          <button id="toggleGrid" class="pill" type="button" aria-pressed="false">8px 网格辅助线</button>
          <button id="toggleAuto" class="pill" type="button" aria-pressed="true">自动刷新（2s）</button>
          <span id="buildMeta" class="meta"></span>
        </div>
        <p class="sub">
          用于主人快速核对页面间距与层级。真实交付以
          <code>ui/*.svg</code>
          为准；这些 PNG 可随时删除。
        </p>
      </div>
    </header>

    <main>
      <div class="grid">
        <section class="card">
          <div class="cardHead">
            <div class="name">库存监控（网格布局）</div>
            <div class="links">
              <a href="/ui/inventory-monitor.svg">SVG 源</a>
            </div>
          </div>
          <img alt="库存监控" src="./inventory-monitor.png" />
        </section>

        <section class="card">
          <div class="cardHead">
            <div class="name">全部产品</div>
            <div class="links">
              <a href="/ui/products.svg">SVG 源</a>
            </div>
          </div>
          <img alt="全部产品" src="./products.png" />
        </section>

        <section class="card">
          <div class="cardHead">
            <div class="name">系统设置</div>
            <div class="links">
              <a href="/ui/settings.svg">SVG 源</a>
            </div>
          </div>
          <img alt="系统设置" src="./settings.png" />
        </section>

        <section class="card">
          <div class="cardHead">
            <div class="name">日志</div>
            <div class="links">
              <a href="/ui/logs.svg">SVG 源</a>
            </div>
          </div>
          <img alt="日志" src="./logs.png" />
        </section>

        <section class="card">
          <div class="cardHead">
            <div class="name">401 未授权</div>
            <div class="links">
              <a href="/ui/unauthorized-401.svg">SVG 源</a>
            </div>
          </div>
          <img alt="401 未授权" src="./unauthorized-401.png" />
        </section>
      </div>
    </main>

    <script>
      const btn = document.getElementById("toggleGrid");
      btn.addEventListener("click", () => {
        const enabled = document.body.classList.toggle("grid");
        btn.setAttribute("aria-pressed", enabled ? "true" : "false");
      });

      // Avoid stale PNGs due to browser caching while iterating on wireframes.
      // (This is a temporary preview page; PNGs are generated artifacts.)
      (() => {
        const ts = String(Date.now());
        const refreshUrl = (raw) => {
          try {
            const u = new URL(raw, window.location.href);
            u.searchParams.set("v", ts);
            return u.toString();
          } catch {
            return raw;
          }
        };

        const buildMeta = document.getElementById("buildMeta");
        if (buildMeta) {
          const now = new Date();
          buildMeta.innerHTML = `版本 <code>v=${ts}</code> • 打开时间 <code>${now.toLocaleString()}</code>`;
        }

        const relink = () => {
          const v = String(Date.now());
          const addV = (raw) => {
            try {
              const u = new URL(raw, window.location.href);
              u.searchParams.set("v", v);
              return u.toString();
            } catch {
              return raw;
            }
          };
          for (const img of document.querySelectorAll("img")) {
            img.src = addV(img.getAttribute("src") || img.src);
          }
          for (const a of document.querySelectorAll("a[href]")) {
            a.href = addV(a.getAttribute("href"));
          }
        };

        // First load
        relink();

        // Auto refresh images so the page updates even if the user doesn't reload.
        const autoBtn = document.getElementById("toggleAuto");
        let timer = setInterval(relink, 2000);
        if (autoBtn) {
          autoBtn.setAttribute("aria-pressed", "true");
          autoBtn.addEventListener("click", () => {
            const pressed = autoBtn.getAttribute("aria-pressed") === "true";
            if (pressed) {
              clearInterval(timer);
              autoBtn.setAttribute("aria-pressed", "false");
            } else {
              timer = setInterval(relink, 2000);
              autoBtn.setAttribute("aria-pressed", "true");
              relink();
            }
          });
        }
      })();
    </script>
  </body>
</html>
